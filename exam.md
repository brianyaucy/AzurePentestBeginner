# Exam

- [Exam](#exam)
  - [Pentest Summary](#pentest-summary)

<br/>

---

## Pentest Summary

The following table shows the accessed resources in the pentest.

<br/>

| **Tenant ID** | **Az Resource** | **Name** | **Method to exploit** |
| --- | --- | --- | --- |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Inventory Webapp | Exploited the unrestricted upload function |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Managed Identity | Inventory webapp service prinicipal | Exploit the upload function and use PHP system command to get the managed identity access and ARM tokens |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Key Vault | inventorycreds-19782062 | Access using the Inventory webapp Managed Identity  |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Azure AD User | User6673757339746967328@defcorpspace.onmicrosoft.com | Use the Inventory webapp's managed identity to access the Key Vault and get the credential of this user |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Automation Account | backupautomation-1978206228366054214 | User6673757339746967328@defcorpspace.onmicrosoft.com is able to edit the runbook in the Automation Account backupautomation-1978206228366054214. |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Azure AD User | User3769563720055157779@defcorpspace.onmicrosoft.com | Use the automation runbook to get the saved credential "credential" in the Automation Account |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Azure Storage Account | epbackup1978206228 | Use the credential of User3769563720055157779@defcorpspace.onmicrosoft.com to access |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Azure Blob | epbackup-space | Use the credential of User3769563720055157779@defcorpspace.onmicrosoft.com to access via Azure Storage Explorer |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Managed Identity | 16b6a33e-0d2b-456d-96fb-cbfce4c6000c | Obtained the managed identity secret in manifest.txt found in the blob container epbackup-space |
| 15e43385-64db-4b74-a18b-d167ec5ef191 | Azure Blob | epbackup-planetary | Use the managed identity credential 16b6a33e-0d2b-456d-96fb-cbfce4c6000c |
| 4e7a1151-36d0-457e-b489-729cf0fb315a | Managed Identity | f2381716-b286-4605-a2f7-1234f8019631 | Obtained the managed identity secret in manifest.txt found in the blob container epbackup-planetary |
| 4e7a1151-36d0-457e-b489-729cf0fb315a | Key Vault | planetary-43556228109789 | Use the managed identity f2381716-b286-4605-a2f7-1234f8019631 to access the Key Vault and get the final flag in the value of the vault object finalflag-fprime |


<br/>

---